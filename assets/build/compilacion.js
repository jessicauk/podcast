angular.module("podcastApp",["ui.router","main.module","servicesModule"]).run(["$rootScope","$http",function(t,e){t.mensaje="Angular tools",t.prueba="Es una pruueba"}]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(t,e,a){a.otherwise("/"),e.state("index",{url:"/",views:{"@":{templateUrl:"assets/templates/busqueda.html",controller:"mainController"}}}).state("index.busqueda",{url:"busca",templateUrl:"assets/templates/main.html",controller:"mainController"}).state("index.podcastList",{url:"lista",templateUrl:"assets/templates/podcast.html",controller:"mainController"})}]).controller("mainController",["$scope","$rootScope","$http","podcastService","$q",function(t,e,a,s,i){t.prueba2="Es una prueba y debe de funcionar",t.baseUrl="https://itunes.apple.com/",t.params=new Object,t.obj=new Object,t.getData=function(e){t.gather=[],console.log(angular.toJson(e)),s.getRss(t.baseUrl,e).then(function(e){var a=e.data;t.hrefAttr;angular.element(a).find("entry").each(function(){t.hrefAttr=$(this).find("link").attr("href"),t.titulo=$(this).find("summary"),t.artista=$(this).find("im\\:artist, artist").text(),t.imagen=$(this).find("im\\:image, image")[2].innerHTML,t.categoria=$(this).find("category").attr("term"),t.gather.push({url:t.hrefAttr,titulo:t.titulo,artista:t.artista,imagen:t.imagen,categoria:t.categoria})});console.log(angular.toJson(t.gather)," si agrego todos")})},t.getPodcast=function(e){var a=e;t.podcastList=[],s.getAudio(a).then(function(e){var a=e.data;angular.element(a).find("tr.podcast-episode").each(function(){t.descripcion=$(this).children(".release-date").attr("sort-value"),t.album=$(this).attr("album"),t.tipo=$(this).attr("kind"),t.audio=$(this).attr("audio-preview-url"),t.audioAlbum=$(this).attr("preview-album"),t.audioArtista=$(this).attr("preview-artist"),t.audioTitulo=$(this).attr("preview-title"),t.audioDuracion=$(this).attr("preview-title"),t.podcastList.push({descripcion:t.descripcion,album:t.audioAlbum,artista:t.audioArtista,titulo:t.audioTitulo,duracion:t.audioDuracion})});console.log(angular.toJson(t.podcastList)," si agrego todos los audios")})}}]).directive("directiveDescargaXml",function(){return{restrict:"A",link:function(t,e,a){$(e).on("click",function(){$lista=$("#list-items"),$mresponsive=$("#menu-adapt"),$mresponsive.hasClass("menu-transform")?$mresponsive.removeClass("menu-transform"):$mresponsive.addClass("menu-transform"),$(".text-menu").hasClass("show")?$(".text-menu").removeClass("show").addClass("hide"):setTimeout(function(){$(".text-menu").removeClass("hide").addClass("show")},500),$lista.slideToggle("slow",function(){$("#list-items li").on("click",function(){$lista.hide(function(){$mresponsive.hasClass("menu-transform")&&$mresponsive.removeClass("menu-transform")})})})})}}}),angular.module("main.module",[]).controller("appController",function(){}),angular.module("servicesModule",[]).factory("podcastService",["$http","$q",function(t,e){return{getRss:function(e,a){return t.get("https://itunes.apple.com/us/rss/toppodcasts/limit=10/genre=1304/explicit=true/xml")},getAudio:function(e){var a=t.get(e).success(function(t){return t}).error(function(t){return{status:!1,message:"Recurso no disponible"}});return a}}}]);